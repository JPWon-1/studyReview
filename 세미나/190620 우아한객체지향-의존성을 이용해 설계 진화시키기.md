# 의존성을 이용해 설계 진화시키기

## https://github.com/eternity-oop

# 의존성이란(Dependency)?
- 코드를 어떻게 배치할것인가에 대한 의사결정
- 핵심 : 변경에 초점을 맞추는게 좋다
- 변경의 핵심 : `의존성`
- ->변경에 의해서 영향을 받을 수 있는 가능성

# 의존성의 종류
1. 클래스 디펜던시
    - 연관관계(Association)   A->B(영구적 관계)
    - 의존관계(Dependency)    A--->B(일시적 관계)
    - 상속관계(Inheritance)   A->B
    - 실체화관계(Realization) A--->B

2. 패키지 사이의 디펜던시
    - 양방향 의존성을 피하라(A가 바뀔 때 B가 바뀌고 B가 바뀌면 A도 바뀐다)
    - 다중성이 적은 방향을 선택하라
        - One to Many 보단 Many to One 
    - 의존성이 없을 땐 빼는게 좋다
     
---
# 2부
- 설계를 할 때 항상 디펜던시를 먼저 본다.
- 코드 작성 후 의존성 관점에서 설계 검토
- 패키지, 관계들의 관계를 잘 다져야 한다.

# 패키지 의존성을 끊는 3가지 방법
- 1. 중간 객체를 만든다
- 2. 의존관계를 인터페이스나 추상클래스로 역전시킨다
- 3. 새로운 패키지로 분리한다

## 성는 문제 - 어디까지 조회할 것인가?
- 객체 참조 어디까지 해야하나?
- lazy loading 문제
- 트랜잭션 경계는 어디까지인가?
---
# 객체참조는 언제 필요한건가
- 객체참조의 문제는 모든 걸 연결시켜버린다
- 객체와 객체간의 결합은 결합도가 가장 높은 의존성 ( 안좋음 )
    - 필요한 경우, 객체참조를 끊어야 한다.
        - 1. Repository를 통한 탐색(약한 결합도)
    - 모든 객체참조가 다 불필요하냐?
        - 그런건 아니다.
        - 결합도가 굉장히 높은 객체들은 같이 묶어주는게 좋다
        - 함께 생성되고, 함께 삭제되는 객체들을 묶어라
        - 도메인 제약사항을 공유하는 객체들을 함께 묶어라
        - 가능하면 분리하라
---
# 객체 밸리데이션은 객체 안에 다 넣을 필요가 없다
- 필요한 밸리데이션들을 모은 클래스를 따로 만들어 절차지향적으로 만든다고 큰 문제가 생기는 건 없다.


---
후기 

- 의존성에 따라 시스템을 진화시켜라
- 연관관계 구현을 할대 객체참조 vs ID 참조 어떤게 좋을지 잘 판단하기
- 아직은 이해 안가는 부분이 너무나 많고
- 마이크로서비스나 비동기 서비스를 많이 안해봐서 이정도까지의 기능 구현이 필요한 것인지
- 일단 내가 해본적도 없고, 요구사항도 없었고, 필요성도 못느꼈던 부분들이라
- 모르는것 투성이였다.
- 그러나 좋은 서비스를 만들기 위해서 꼭 알고 지나가야할 부분들이 많았기에 도움이 되는 영상이였다.