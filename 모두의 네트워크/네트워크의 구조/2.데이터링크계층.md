# 데이터 링크 계층 : 랜에서 데이터 전송하기

### OSI모델 2계층인 데이터 링크 계층의 이해
* 이더넷
* CSMA/CD 방식
* MAC 주소
* 스위치
* 충돌 도메인

## 1) 이더넷이란?
데이터 링크 계층은 네트워크 장비 간에 신호를 주고받는 규칙을 정하는 계층으로 랜에서 데이터를 정상적으로 주고 받기 위해 필요한 계층이다. 그 규칙들 중 일반적으로 가장 많이 사용되는 규칙이 **이더넷**이다.

## 2) CSMA/CD 방식
허브에서 데이터를 보낼 때 컴퓨터 여러대가 동시에 데이터를 보내면 데이터들이 서로 부딪힐 수도 있는데 이것을 충돌이라고 한다.

그래서 이더넷은 여러 컴퓨터가 동시에 데이터를 전송해도 충돌이 일어나지 않는 구조로 되어 있다.

예를 들어 이더넷에서 데이터를 보내는 시점을 늦추는 것인다 이러한 방법을
**CSMA/CD** 라고 한다.
~~~
CSMA/CD
Carrier Sense Multiple Access with Collision Detection(반송파 감지 다중 접속 및 충돌 탐지)
`CS`: 데이터를 보내려고 하는 컴퓨터가 케이블에 신호가 흐르고 있는지를 확인
`MA`: 케이블에 데이터가 흐르고 있지 않다면 데이터를 보내도 좋다
`CD`: 충돌이 발생하고 있는지를 확인한다
~~~

하지만 지금은 효율이 좋지 않다는 이유로 CSMA/CD 방식을 거의 사용하지 않는다!

이유는 스위치라는 장비를 사용하면서 충돌이 일어나지 않기때문에 필요가 없어졌다.

## 3) MAC 주소
랜카드에서 비트열을 전기 신호로 변환하는데 , 이러한 랜카드에는 MAC주소라는 번호가 정해져 있다. 

물리주소라고 부르기도한다. 전세계에서 유일한 번호로 할당되어 있다

MAC주소는 48비트 숫자로 구성되어 있다. 앞의 24비트는 랜 카드를 만드는 제조사 번호이고 뒤쪽 24비트는 제조사가 랜 카드에 붙인 일련번호다. 
~~~
MAC 주소
Media Access Control Address(물리 주소)
~~~
이더넷 헤더는 목적지 MAC주소(6바이트), 출발지 MAC주소(6바이트), 유형(2바이트) 으로 총 14바이트로 구성 된다.

이더넷 헤더에 데이터의 목적지인 상대방 컴퓨터의 MAC 주소와 자신의 MAC주소 정보를 넣고 데이터를 전송하면 목적지와 같은 MAC주소에만 데이터가 전송될 수 있다.

## 4) 스위치
스위치는 데이터 링크 계층에서 동작하고 레이어 2 스위치 또는 스위칭 허브라고 불린다.

스위치 내부에는 MAC주소 테이블이라는 것이 있다.

MAC주소 테이블은 스위치의 포트 번호와 해당 포트에 연결되어 있는 컴퓨터의 MAC주소가 등록되는 데이터베이스이다.

MAC주소 테이블은 MAC주소 학습 기능을 통해 테이블에 주소를 저장하고
필터링을 통해 목적지를 선택한다.

## 5) 충돌 도메인
전이중 통신 = 송수신을 동시에 통신하는 방식
반이중 통신 = 송신과 수신을 번갈아가면서 통신 방식

충돌이란 반이중 통신 방식에서 데이터를 동시에 전송할 때 충돌이 일어나는 것을 말하고 그 영향이 미치는 범위를 충돌 도메인이라고 한다.

허브(반이중 통식)에서는 충돌이 일어나면 허브에 접속되어 있는 모든 컴퓨터에 영향을 미친다.

스위치(전이중 통신)에는 데이터를 동시에 송수신할 수 있기에 충돌이 일어나지 않고, 충돌 도메인의 범위도 데이터를 전송한 단 한대의 컴퓨터가 된다.
